if(void 0===wcpt)var wcpt={controller:{},data:{}};jQuery((function($){var controller=wcpt.controller,data=wcpt.data;if(window.wcpt_last_saved_data_json=JSON.stringify(data),controller.update_table_title=function(){var $this,new_title=$(this).val();wcpt.data.title=new_title,$('.wcpt-editor-save-table [name="title"]').val(new_title)},controller.copy_shortcode=function(){var $this=$(this);$this.siblings("input").select(),document.execCommand("copy"),$this.children(".wcpt-sc-display-copy-button-icon").hide(),$this.children(".wcpt-sc-display-copy-button-success").show(),setTimeout((function(){$this.children(".wcpt-sc-display-copy-button-success").hide(),$this.children(".wcpt-sc-display-copy-button-icon").show()}),500)},controller.switch_editor_tabs=function(){var $this=$(this),tab=$this.attr("data-wcpt-tab"),$labels=$this.siblings(".wcpt-tab-label"),$trigger_container=$this.closest(".wcpt-tab-triggers"),$contents=$trigger_container.length?$trigger_container.siblings(".wcpt-tab-content"):$this.closest(".wcpt-editor").find(".wcpt-tab-content"),$target_content=$contents.filter("[data-wcpt-tab="+tab+"]"),active_class="active";$labels.removeClass("active"),$this.addClass("active"),$contents.removeClass("active"),$target_content.addClass("active"),window.location.hash=tab},controller.toggle_sub_categories=function(){var $this;$(this).parent().toggleClass("wcpt-show-sub-categories")},controller.auto_select_on_click=function(){var node=this;if(document.body.createTextRange){const range=document.body.createTextRange();range.moveToElementText(this),range.select()}else if(window.getSelection){const selection=window.getSelection(),range=document.createRange();range.selectNodeContents(this),selection.removeAllRanges(),selection.addRange(range)}},controller.save_data=function(e){e.preventDefault();var $focused_input=$("input:focus, textarea:focus");$focused_input.length&&$focused_input.attr("wcpt-model-key")&&$focused_input.trigger("change"),$("body").trigger("wcpt_save"),data.version=window.wcpt_version;var $this=$(this),post_id=$this.find("input[name='post_id']").val(),title=$this.find("input[name='title']").val(),nonce=$this.find("input[name='nonce']").val(),json_data=JSON.stringify(data),$button=$this.find(".wcpt-save"),action=$this.attr("action");window.wcpt_last_saved_data_json=json_data,$this.hasClass("wcpt-saving")||$.ajax({type:"POST",url:ajaxurl,beforeSend:function(){$this.addClass("wcpt-saving"),$button.addClass("disabled")},data:{action:action,wcpt_post_id:post_id,wcpt_title:title,wcpt_nonce:nonce,wcpt_data:json_data},success:function(data){$this.removeClass("wcpt-saving"),$button.removeClass("disabled"),$this.addClass("wcpt-saved"),setTimeout((function(){$this.removeClass("wcpt-saved")}),1e3),"string"==typeof data&&-1!==data.indexOf("WCPT success:")?console.log(data):alert(data)}})},controller.open_dynamic_input_wrapper=function(){var $input=$(this);if(!$input.parent().hasClass("wcpt-diw")&&!$input.hasClass("wcpt-diw--disabled")){var prev_style=$input.attr("style"),style={width:$input.outerWidth()};$.each(["float","margin","top","right","bottom","left","border-width","border-radius"],(function(key,prop){style[prop]=$input.css(prop)})),"absolute"==$input.css("position")&&(style.position="absolute");var $wrap=$('<div class="wcpt-diw">');$wrap.css(style),$input.wrap($wrap),$input.focus(),$("body").on("blur mousedown keydown",controller.close_dynamic_input_wrapper),$input.after('<div class="wcpt-diw-tray">');var $tray=$input.next(".wcpt-diw-tray"),$color;if(-1!==$input.attr("wcpt-model-key").indexOf("color")||"background"==$input.attr("wcpt-model-key")||"fill"==$input.attr("wcpt-model-key"))$tray.append('<input type="color">'),$tray.css({height:0}),$tray.find('input[type="color"]').spectrum({color:$input.val(),flat:!0,allowEmpty:!0,showAlpha:!0,preferredFormat:"rgba",clickoutFiresChange:!0,showInput:!1,showButtons:!1,move:function(color){$input.val(color.toRgbString()).change()}})}},controller.close_dynamic_input_wrapper=function(e){var $origin,$wrap;$(e.target).closest(".wcpt-diw").length||$(".wcpt-diw").each((function(){var $this=$(this),$input=$this.children("input");$this.replaceWith($input),$("body").off("blur mousedown keydown",controller.close_dynamic_input_wrapper),$input.change()}))},$("body").on("keydown","input[wcpt-model-key]",(function(e){if(e.key&&-1!==$.inArray(e.key,["ArrowUp","ArrowDown"])){var model_key=$(this).attr("wcpt-model-key");if(-1!==$.inArray(model_key,["font-size","custom_zoom_scale","line-height","letter-spacing","stroke-width","top","left","right","bottom","width","max-width","min-width","height","max-height","min-height","outline-radius","outline-width","border-radius","border-width","border-left-width","border-right-width","border-top-width","border-bottom-width","border-spacing","divider-border-width","padding","padding-left","padding-right","padding-top","padding-bottom","section-padding","section-padding-left","section-padding-right","section-padding-top","section-padding-bottom","margin","margin-left","margin-right","margin-top","margin-bottom","gap","row_gap","--wcpt-list-row-border-width","--wcpt-list-row-between-column-border-width","--wcpt-list-row-border-radius","--wcpt-list-row-gap","--wcpt-list-row-box-shadow-x-offset","--wcpt-list-row-box-shadow-y-offset","--wcpt-list-row-box-shadow-blur-radius","--wcpt-list-row-box-shadow-spread-radius","--wcpt-list-row-box-shadow-color"])){e.target.value||(e.target.value="0px");var suffix=e.target.value.slice(-2),val=e.target.value;val.length>2&&isNaN(suffix)?val=val.substring(0,val.length-2):suffix="";var is_float=!((parseInt(val)+"").length===(val+"").length);"ArrowUp"==e.key?e.target.value=(10*val+(is_float?1:10))/10:"ArrowDown"==e.key&&(e.target.value=(10*val-(is_float?1:10))/10);var min=e.target.min,max=e.target.max,non_negative_props;["width","height","max-width","max-height","min-width","min-height","font-size","line-height","letter-spacing","stroke-width","border-width","border-left-width","border-right-width","border-top-width","border-bottom-width","border-radius","padding","padding-left","padding-right","padding-top","padding-bottom","--wcpt-list-row-border-width","--wcpt-list-row-between-column-border-width","--wcpt-list-row-border-radius","--wcpt-list-row-gap"].includes(model_key)&&e.target.value<0&&(e.target.value=0),min&&e.target.value<min&&(e.target.value=min),max&&e.target.value>max&&(e.target.value=max),val=e.target.value,is_float&&(parseInt(val)+"").length===(val+"").length&&(e.target.value=e.target.value+".0"),e.target.value+=suffix}}})),$("body").on("click",".wcpt-sc-display-copy-button",controller.copy_shortcode),$("body").on("click",".wcpt-tab-label",controller.switch_editor_tabs),$("body").on("keyup",".wcpt-table-title",controller.update_table_title),$("body").on("click",".wcpt-toggle-sub-categories",controller.toggle_sub_categories),$("body").on("focus",'input[type="text"][wcpt-model-key], input[type="number"][wcpt-model-key]',controller.open_dynamic_input_wrapper),$("body").on("click",".wcpt-auto-select-on-click",controller.auto_select_on_click),dominator_ui.init($(".wcpt-editor, .wcpt-settings"),data),$("body").on("click",".wcpt-toggle-label",(function(){var $this,$section=$(this).closest(".wcpt-toggle-options"),toggle_anchor=$section.attr("wcpt-model-key")||$section.attr("data-wcpt-anchor");$section.toggleClass("wcpt-open"),toggle_anchor&&$section.parent().hasClass("wcpt-settings")&&(window.location.hash=toggle_anchor)})),$("body").on("click",".wcpt-editor-row-handle",(function(e){var $target=$(e.target),$row=$target.closest(".wcpt-editor-row");!$target.closest(".wcpt-editor-row-no-toggle").length&&$target.closest(".wcpt-editor-row-handle-data, .wcpt-editor-row-toggle").length&&$row.toggleClass("wcpt-editor-row-toggle-opened")})),$("body").on("click",".wcpt-toggle",(function(e){e.preventDefault();var $toggle=$(this),$trigger=$("> .wcpt-toggle-trigger",$toggle);$(e.target).closest($trigger).length&&$toggle.toggleClass("wcpt-toggle-on wcpt-toggle-off"),$("body").off("click.wcpt_toggle_close").one("click.wcpt_toggle_close",(function(e){$(e.target).closest($toggle).length||$toggle.removeClass("wcpt-toggle-on").addClass("wcpt-toggle-off")})),$toggle.find("a").off("click.wcpt_toggle_link").on("click.wcpt_toggle_link",(function(e){window.open(this.href,"_blank")}))})),window.location.hash&&($('[data-wcpt-tab="'+window.location.hash.substr(1)+'"].wcpt-tab-label').trigger("click"),$('.wcpt-settings > [wcpt-model-key="'+window.location.hash.substr(1)+'"] > .wcpt-toggle-label, .wcpt-settings > [data-wcpt-anchor="'+window.location.hash.substr(1)+'"] > .wcpt-toggle-label').trigger("click")),$("body").hasClass("wc_product_table_page_wcpt-settings")){var $section=$('[data-wcpt-anchor="'+window.location.hash.substr(1)+'"]');$section.length&&$section[0].scrollIntoView({behavior:"smooth"})}function wcpt_maybe_float_save_button(){var $save_button=$(".wcpt-editor-save-table");window.scrollY+window.innerHeight<$save_button.parent().offset().top?$save_button.addClass("wcpt-editor-save-table--floating"):$save_button.removeClass("wcpt-editor-save-table--floating")}$("body").on("submit",".wcpt-save-data",controller.save_data),$(window).bind("keydown",(function(e){(e.ctrlKey||e.metaKey)&&"s"===String.fromCharCode(e.which).toLowerCase()&&(e.preventDefault(),$(".wcpt-save-data").submit())})),$(".wcpt-editor, .wcpt-settings").length&&($(window).on("scroll",wcpt_maybe_float_save_button),$("body").on("click",".wcpt-toggle-options",wcpt_maybe_float_save_button),wcpt_maybe_float_save_button()),$("body").on("click",".wcpt-editor-tab-columns__device-tabs__triggers__item",(function(e){var $panel,device;device_tabs__set_state({device:$(this).attr("data-wcpt-device")})}));var $scroll_to_top=$(".wcpt-editor-tab-columns__device-tabs__scroll-to-top");function device_tabs__editor_remove_focus_mode_html_classes(){$.each(["wcpt-editor-tab-columns--focus-mode","wcpt-editor-device-columns-container--focused","wcpt-column-settings--focused","wcpt-column-settings--reveal-anim","wcpt-editor-tab-columns__device-tabs__column-link--focused","wcpt-child-column-link-selected"],(function(index,html_class){$("."+html_class).removeClass(html_class)}))}function device_tabs__set_state(request_state,$tabs){$tabs||($tabs=$(".wcpt-editor-tab-columns__device-tabs"));var prev_state=device_tabs__get_state($tabs),new_state=device_tabs__get_valid_new_state(request_state,prev_state,$tabs);device_tabs__render_focus_mode_state(new_state,prev_state,$tabs),device_tabs__render_device_panel_state(new_state,prev_state,$tabs),device_tabs__render_column_buttons_state(new_state,prev_state,$tabs),device_tabs__manage_scroll(request_state,new_state,prev_state,$tabs),$tabs.data("wcpt_tab_state",new_state)}function device_tabs__get_valid_new_state(request_state,prev_state,$tabs){var _new_state=$.extend({},prev_state,request_state),valid_max_column_index=device_tabs__get_device_column_count((_new_state=device_tabs__maybe_switch_to_first_column(_new_state,prev_state)).device,$tabs);return _new_state.column_index>=valid_max_column_index&&(_new_state.column_index=null),_new_state}$(window).on("scroll",(function(){window.scrollY>800?$scroll_to_top.addClass("wcpt-editor-tab-columns__device-tabs__scroll-to-top--visible"):$scroll_to_top.removeClass("wcpt-editor-tab-columns__device-tabs__scroll-to-top--visible")})),$scroll_to_top.on("click",(function(e){e.preventDefault();var $page_title,scroll_top=$(".wcpt-page-title").offset().top-$("#wpadminbar").outerHeight()-20;$("html, body").stop().animate({scrollTop:scroll_top},300,"swing")})),$('[name="wcpt-show-all-columns"]').on("change",(function(){var $this;device_tabs__set_state({focus_mode:!$(this).is(":checked"),device:"laptop"})})),$("body").on("click",".wcpt-editor-tab-columns__device-tabs__panels__item a",(function(e){e.preventDefault();var $this=$(this),column_index=$this.attr("data-wcpt-index");if($this.is('[data-wcpt-index="add"]')){var $tabs,tabs_state,$device_container=device_tabs__get_device_column_settings_container(device_tabs__get_state(device_tabs__get_container()).device);$(">.wcpt-button",$device_container).click()}else device_tabs__set_state({column_index:column_index})})),window.device_tabs__set_state=device_tabs__set_state;var $device_tabs=$(".wcpt-editor-tab-columns__device-tabs");function device_tabs__get_container(){return $(".wcpt-editor-tab-columns__device-tabs")}function device_tabs__get_state($tabs){var default_stats={focus_mode:null,device:null,column_index:null};return $tabs.data("wcpt_tab_state")||default_stats}function device_tabs__render_focus_mode_state(new_state,previous_state,$tabs){new_state.focus_mode?(device_tabs__editor_add_focus_mode_html_classes(new_state,previous_state,$tabs),$(".wcpt-editor-columns-container").sortable("disable")):(device_tabs__editor_remove_focus_mode_html_classes(),$(".wcpt-editor-columns-container").sortable("enable")),device_tabs__toggle_focus_mode_option(new_state,$tabs)}function device_tabs__editor_add_focus_mode_html_classes(new_state,previous_state,$tabs){var $main_columns_tab;$(".wcpt-editor-tab-columns").addClass("wcpt-editor-tab-columns--focus-mode");var $selected_device_container=device_tabs__get_selected_device_column_settings_container($tabs),$target_device_container=device_tabs__get_device_column_settings_container(new_state.device),html_class="wcpt-editor-device-columns-container--focused";$selected_device_container.removeClass(html_class),$target_device_container.addClass(html_class);var $selected_column_settings=device_tabs__get_selected_device_column_settings($tabs);if($target_column_settings=device_tabs__get_device_column_settings(new_state.column_index,new_state.device),html_class="wcpt-column-settings--focused",$selected_column_settings.removeClass(html_class),$target_column_settings.addClass(html_class),device_tabs__state_change_check(new_state,previous_state)){var animation_html_class="wcpt-column-settings--reveal-anim";$target_column_settings.removeClass(animation_html_class),setTimeout((function(){$target_column_settings.addClass(animation_html_class)}),1)}}function device_tabs__state_change_check(new_state,previous_state){if(new_state.device!==previous_state.device||new_state.column_index!==previous_state.column_index||new_state.focus_mode!==previous_state.focus_mode)return!0}function device_tabs__toggle_focus_mode_option(state,$tabs){$('input[name="wcpt-show-all-columns"]',$tabs).prop("checked",!state.focus_mode)}function device_tabs__get_selected_device_column_settings_container($tabs){var state;return device_tabs__get_device_column_settings_container(device_tabs__get_state($tabs).device)}function device_tabs__get_selected_device_column_settings($tabs){var state=device_tabs__get_state($tabs);return device_tabs__get_device_column_settings(state.column_index,state.device)}function device_tabs__render_device_panel_state(new_state,prev_state,$tabs){if(new_state.device!==prev_state.device){var $selected_device_panel=device_tabs__get_selected_panel($tabs),$target_device_panel=device_tabs__get_panel(new_state.device,$tabs),$selected_device_tab=device_tabs__get_selected_tab($tabs),$target_device_tab=device_tabs__get_tab(new_state.device,$tabs),selected_panel_html_class="wcpt-editor-tab-columns__device-tabs__panels__item--selected",selected_tab_html_class="wcpt-editor-tab-columns__device-tabs__triggers__item--selected";$selected_device_panel.removeClass(selected_panel_html_class),$target_device_panel.addClass(selected_panel_html_class),$selected_device_tab.removeClass(selected_tab_html_class),$target_device_tab.addClass(selected_tab_html_class),device_tabs__column_buttons_reveal_animation(new_state.device,$tabs)}device_tabs__maybe_enable_down_arrow(new_state,$tabs)}function device_tabs__manage_scroll(request_state,new_state,prev_state,$tabs){void 0!==$tabs.data("wcpt_initial_state_set")?new_state.focus_mode?prev_state.focus_mode||device_tabs__instant_scroll_to_editor_top():request_state.column_index?device_tabs__scroll_to_column_settings(new_state.column_index,new_state.device):request_state.device&&device_tabs__scroll_to_device_container(new_state.device):$tabs.data("wcpt_initial_state_set",!0)}function device_tabs__scroll_to_device_container(device){var $device_column_container=device_tabs__get_device_column_settings_container(device),sticky_elms_height=device_tabs__get_sticky_offset(),scroll_top=$device_column_container.offset().top-sticky_elms_height-20;$("html, body").stop().animate({scrollTop:scroll_top},300,"swing")}function device_tabs__scroll_to_column_settings(column_index,device){var $column_settings=device_tabs__get_device_column_settings(column_index,device),sticky_elms_height=device_tabs__get_sticky_offset(),scroll_top=$column_settings.offset().top-sticky_elms_height-40,$animation_placeholder;$column_settings.is(":hidden")&&(scroll_top+=$column_settings.prev(".wcpt-row-plc-hld").offset().top);$("html, body").stop().animate({scrollTop:scroll_top},300,"swing")}function device_tabs__instant_scroll_to_editor_top(){var sticky_elms_height=$("#wpadminbar").outerHeight(),scroll_top=$(".wcpt-editor").offset().top-sticky_elms_height-20;window.scrollTo(0,scroll_top)}function device_tabs__column_buttons_reveal_animation(device,$tabs){var defer_anim=0,$column_buttons;device_tabs__get_device_column_buttons(device,$tabs).removeClass("wcpt-column-link--reveal-anim").each((function(){var $this=$(this);setTimeout((function(){$this.addClass("wcpt-column-link--reveal-anim")}),defer_anim),defer_anim+=20}))}function device_tabs__maybe_enable_down_arrow(new_state,$tabs){var $panel=device_tabs__get_panel(new_state.device,$tabs),device_column_names=device_tabs__get_device_column_names(new_state.device,$tabs),status=!1;null!==new_state.column_index&&new_state.column_index<device_column_names.length&&(status=!0),$panel.toggleClass("wcpt-child-column-link-selected",status)}function device_tabs__get_selected_tab($tabs){var state;return device_tabs__get_tab(device_tabs__get_state($tabs).device,$tabs)}function device_tabs__get_tab(device,$tabs){return $('.wcpt-editor-tab-columns__device-tabs__triggers__item[data-wcpt-device="'+device+'"]',$tabs)}function device_tabs__maybe_switch_to_first_column(new_state,prev_state){return new_state.device===prev_state.device&&new_state.focus_mode===prev_state.focus_mode||(new_state.column_index=0),new_state}function device_tabs__render_column_buttons_state(new_state,prev_state,$tabs){if(new_state.column_index!=prev_state.column_index||new_state.device!=prev_state.device){var $selected_column_button=device_tabs__get_selected_column_button($tabs),$target_column_button=device_tabs__get_column_button(new_state.column_index,new_state.device,$tabs),focused_html_class="wcpt-editor-tab-columns__device-tabs__column-link--focused";$selected_column_button.removeClass(focused_html_class),$target_column_button.addClass(focused_html_class)}}function device_tabs__get_selected_column_button($tabs){var state=device_tabs__get_state($tabs);return device_tabs__get_column_button(state.column_index,state.device,$tabs)}function device_tabs__get_sticky_offset(){return $("#wpadminbar").outerHeight()+$(".wcpt-editor-tab-columns__device-tabs").outerHeight()}function device_tabs__get_device_column_settings_container(device){return $('.wcpt-editor-columns-container[data-wcpt-device="'+device+'"]')}function device_tabs__get_device_column_settings(column_index,device){if(null===column_index)return $();var $device_container=device_tabs__get_device_column_settings_container(device);return $("> .wcpt-column-settings",$device_container).eq(column_index)}function device_tabs__update_last_column_trigger_record(trigger){var $tabs;device_tabs__get_container().data("wcpt-tabs-last-column-trigger",trigger)}function device_tabs__get_last_column_trigger_record(trigger){var $tabs;return device_tabs__get_container().data("wcpt-tabs-last-column-trigger")}function device_tabs__clear_last_column_trigger_record(){device_tabs__update_last_column_trigger_record(!1)}function device_tabs__toggle_show_all_columns_button($tabs){var $show_all=$(".wcpt-editor-tab-columns__device-tabs__show-all-columns",$tabs),columns_exist=device_tabs__columns_exist($tabs);$show_all.toggle(columns_exist)}function device_tabs__columns_exist($tabs){var columns=$tabs.data("wcpt-columns"),columns_exist=!1;return $.each(columns,(function(device,device_columns){device_columns.length&&(columns_exist=!0)})),columns_exist}function device_tabs__get_column_names($tabs){var columns=$tabs.data("wcpt-columns"),column_names={};return $.each(["laptop","tablet","phone"],(function(index,device){column_names[device]=[],$.each(columns[device],(function(index,column){column_names[device].push(column.name)}))})),column_names}function device_tabs__get_device_column_names(device,$tabs){var column_names;return device_tabs__get_column_names($tabs)[device]}function device_tabs__get_device_column_count(device,$tabs){var column_names;return device_tabs__get_column_names($tabs)[device].length}function device_tabs__get_previous_column_names($tabs){return $tabs.data("wcpt-previous-column-names")}function device_tabs__update_previous_column_names_record($tabs){var column_names=device_tabs__get_column_names($tabs);return $tabs.data("wcpt-previous-column-names",column_names)}function device_tabs__get_selected_panel($tabs){var state;return device_tabs__get_panel(device_tabs__get_state($tabs).device,$tabs)}function device_tabs__get_panel(device,$tabs){return $tabs.find('.wcpt-editor-tab-columns__device-tabs__panels__item[data-wcpt-device="'+device+'"]')}function device_tabs__get_selected_device($tabs){var $selected_device_panel;return device_tabs__get_selected_panel($tabs).attr("data-wcpt-device")}function device_tabs__get_column_button(column_index,device,$tabs){var $panel;return null!==column_index?device_tabs__get_panel(device,$tabs).find(".wcpt-column-link").eq(column_index):$()}function device_tabs__get_device_column_buttons(device,$tabs){var $panel;return device_tabs__get_panel(device,$tabs).find(".wcpt-column-link")}function device_tabs__update_all_column_buttons($tabs){$.each(["laptop","tablet","phone"],(function(index,device){device_tabs__update_device_panel(device,$tabs)})),device_tabs__toggle_show_all_columns_button($tabs)}function device_tabs__update_device_panel(device,$tabs){device_tabs__rebuild_panel_column_buttons(device,$tabs),device_tabs__make_panel_column_buttons_sortable(device,$tabs)}function device_tabs__rebuild_panel_column_buttons(device,$tabs){var columns=$tabs.data("wcpt-columns"),$panel=device_tabs__get_panel(device,$tabs),state=device_tabs__get_state($tabs),selected_column_index=state.device===device?state.column_index:-1;$panel.empty();for(const[index,column]of Object.entries(columns[device])){var name=column.name?column.name:"Column # "+(parseInt(index)+1),html_class="wcpt-editor-tab-columns__device-tabs__column-link wcpt-column-link wcpt-column-link--reveal-anim";index==selected_column_index&&(html_class+=" wcpt-editor-tab-columns__device-tabs__column-link--focused"),$panel.append($('<a href="#" data-wcpt-index="'+index+'" class="'+html_class+'" ><span class="wcpt-column-link__count">'+(parseInt(index)+1)+"</span>"+name.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</a>"))}$panel.append($('<a href="#" class="wcpt-column-link--reveal-anim" data-wcpt-index="add">+ Add column</a>'))}function device_tabs__make_panel_column_buttons_sortable(device,$tabs){var $panel=device_tabs__get_panel(device,$tabs);$panel.sortable({containment:"parent",items:"> a:not([data-wcpt-index='add'])",start:function(e,ui){ui.placeholder.height(ui.item.height()),ui.placeholder.width(ui.item.width())},stop:function(event,ui){var $column_buttons=device_tabs__get_device_column_buttons(device,$tabs),$device_section=device_tabs__get_device_column_settings_container(device),$device_section__add_new_button=$("> .wcpt-button",$device_section),state;if($column_buttons.each((function(){var index=$(this).attr("data-wcpt-index"),$index_matching_row;$device_section.children('[wcpt-model-key-index="'+index+'"]').insertBefore($device_section__add_new_button)})),device_tabs__get_state($tabs).focus_mode){var $selected_button=$panel.children(".wcpt-editor-tab-columns__device-tabs__column-link--focused");$selected_button.length&&device_tabs__set_state({column_index:$selected_button.index()})}$device_section.trigger("sortupdate")}})}function device_tabs__focus_mode_is_on($tabs){var state;return device_tabs__get_state($tabs).focus_mode}function device_tabs__device_already_selected(device,$tabs){var $device_panel=device_tabs__get_panel(device,$tabs),$selected_panel=device_tabs__get_selected_panel($tabs);return $device_panel.is($selected_panel)}function wcpt_check_unsaved_changes(){return!(!window.wcpt_last_saved_data_json||JSON.stringify(data)===window.wcpt_last_saved_data_json)}$device_tabs.length&&(device_tabs__update_all_column_buttons($device_tabs),device_tabs__set_state({focus_mode:!0,device:"laptop",column_index:0},$device_tabs)),$("body").on("update.wcpt",".wcpt-editor-tab-columns__device-tabs",(function(){var $tabs=$(this),trigger=device_tabs__get_last_column_trigger_record($tabs);if(trigger){switch(device_tabs__update_all_column_buttons($tabs),trigger.action){case"remove":device_tabs__set_state({column_index:null});break;case"add":device_tabs__set_state({column_index:trigger.column_index,device:trigger.device});break;case"duplicate":device_tabs__set_state({column_index:parseFloat(trigger.column_index)+1,device:trigger.device})}device_tabs__clear_last_column_trigger_record()}})),$("body").on("keydown",'input[type="text"].wcpt-column-name-input',(function(){var $row=$(this).closest(".wcpt-column-settings"),column_index,device;device_tabs__update_last_column_trigger_record({action:"false",column_index:$row.attr("wcpt-model-key-index"),device:$row.closest(".wcpt-editor-columns-container").attr("data-wcpt-device")})})),$("body").on("dom_ui_before_remove_row",".wcpt-column-settings",(function(){var $row=$(this);column_index=$row.attr("wcpt-model-key-index"),device=$row.closest(".wcpt-editor-columns-container").attr("data-wcpt-device"),device_tabs__update_last_column_trigger_record({action:"remove",column_index:column_index,device:device})})),$("body").on("dom_ui_before_duplicate_row",".wcpt-column-settings",(function(){var $row=$(this);column_index=$row.attr("wcpt-model-key-index"),device=$row.closest(".wcpt-editor-columns-container").attr("data-wcpt-device"),device_tabs__update_last_column_trigger_record({action:"duplicate",column_index:column_index,device:device})})),$("body").on("dom_ui_before_add_row",".wcpt-editor-columns-container",(function(){var $container=$(this);column_index=$container.data("wcpt-data").length,device=$container.attr("data-wcpt-device"),device_tabs__update_last_column_trigger_record({action:"add",column_index:column_index,device:device})})),$("body").on("sortupdate dom_ui_before_row_move_up dom_ui_before_row_move_down dom_ui_before_row_sortupdate dom_ui_before_row_sortreceive",".wcpt-editor-columns-container",(function(){device_tabs__update_last_column_trigger_record({action:!1})})),$("body").on("click",".wcpt-editor-row-expand, .wcpt-editor-row-contract",(function(e){var $this=$(this),$column=$this.closest(".wcpt-column-settings");$this.hasClass("wcpt-editor-row-expand")?$column.addClass("wcpt-toggle-column-expand"):$column.removeClass("wcpt-toggle-column-expand"),e.preventDefault()})),$(".wcpt-select-icon").each((function(){var $this=$(this);$this.select2({templateResult:function(icon){var img='<img class="wcpt-icon-rep" src="'+wcpt_icons_url+"/"+icon.id+'.svg">',$icon;return $("<span>"+img+'<span class="wcpt-icon-name">'+icon.text+"</span></span>")},templateSelection:function(icon){var img='<img class="wcpt-icon-rep" src="'+wcpt_icons_url+"/"+icon.id+'.svg">',$icon;return $("<span>"+img+'<span class="wcpt-icon-name">'+icon.text+"</span></span>")},dropdownParent:$this.parent()})})),window.wcpt_duplicate_laptop_to_phone=function(){wcpt_duplicate_device("laptop","phone")},window.wcpt_duplicate_laptop_to_tablet=function(){wcpt_duplicate_device("laptop","tablet")},window.wcpt_duplicate_device=function(source,destination){source||(source="laptop"),destination||(destination="phone"),$.each(data.columns[source],(function(index,col){data.columns[destination].push(dominator_ui.refresh_ids($.extend(!0,{},col)))})),$(".wcpt-editor-save-button").click(),window.location.reload()},$("body").on("click",".wcpt-editor-more-options__trigger__more",(function(e){$(this).closest(".wcpt-editor-more-options").addClass("wcpt-editor-more-options--expanded")})),$("body").on("click",".wcpt-editor-more-options__trigger__less",(function(e){$(this).closest(".wcpt-editor-more-options").removeClass("wcpt-editor-more-options--expanded")})),$("body").on("click",".wcpt-editor-top-table-actions .wcpt-toggle-tray > span",(function(e){var $this=$(this),action=$this.attr("data-wcpt-action"),unsaved_changes=wcpt_check_unsaved_changes();switch(window.wcpt_last_saved_data_json&&(JSON.stringify(data),window.wcpt_last_saved_data_json),action){case"duplicate":var callback=function(){$(window).off("beforeunload"),window.location.href=$this.attr("data-wcpt-url")};unsaved_changes?confirm("Auto save settings and duplicate this product table?",callback):callback();break;case"export":var callback=function(){var table_id=data.id,nonce=$this.attr("data-wcpt-nonce"),$form=$("<form>",{method:"POST",enctype:"multipart/form-data"});$form.append($("<input>",{type:"hidden",name:"wcpt_context",value:"tables"})),$form.append($("<input>",{type:"hidden",name:"wcpt_action",value:"export"})),$form.append($("<input>",{type:"hidden",name:"wcpt_export_id",value:table_id})),$form.append($("<input>",{type:"hidden",name:"wcpt_import_export_nonce",value:nonce})),$("body").append($form),$form.submit(),$form.remove()};unsaved_changes?confirm("Auto save settings and export this product table?",callback):callback();break;case"trash":var callback;confirm("Are you sure you want to delete this product table?",callback=function(){$(window).off("beforeunload"),window.location.href=$this.attr("data-wcpt-url")})}function confirm(message,callback){window.confirm(message)&&callback()}})),$(window).on("beforeunload",(function(){if(wcpt_check_unsaved_changes())return"You have unsaved changes. Are you sure you want to leave this page?"})),$("body").on("click",".wcpt-reset-global-settings",(function(e){var $this;window.confirm("Are you sure you want to reset the plugin's global settings? This will not delete your product tables. It will only reset global settings for the plugin.")?$(this).addClass("wcpt-resetting"):e.preventDefault()})),$("body").on("click",".wcpt-activate-license, .wcpt-deactivate-license",(function(){var $this=$(this),$buttons=$this.siblings().addBack(),action="wcpt_manage_license",purpose=$this.attr("data-wcpt-purpose"),nonce=$this.attr("data-wcpt-nonce"),$container=$this.closest(".wcpt-license-container"),$status=$container.find(">.wcpt-license-key-status",$container),license_key=$container.find('[wcpt-model-key="key"]').val(),addon_slug=$container.attr("wcpt-addon-slug")?$container.attr("wcpt-addon-slug"):"",addon_item_id=$container.attr("wcpt-addon-item-id")?$container.attr("wcpt-addon-item-id"):"",$feedback=$container.find(".wcpt-license-feedback");license_key&&32==license_key.length?$.ajax({type:"POST",url:ajaxurl,beforeSend:function(){$(">span",$feedback).addClass("wcpt-hide"),$container.addClass("wcpt-verifying-license"),$buttons.prop("disabled",!0)},data:{action:action,wcpt_nonce:nonce,wcpt_purpose:purpose,wcpt_key:license_key,wcpt_addon_slug:addon_slug,wcpt_addon_item_id:addon_item_id},success:function(data){switch($container.removeClass("wcpt-verifying-license"),$buttons.prop("disabled",!1),data){case"deactivated":$feedback.find(".wcpt-response-deactivated").removeClass("wcpt-hide"),$buttons.filter('[data-wcpt-purpose="deactivate"]').prop("disabled",!0);break;case"activated":$feedback.find(".wcpt-response-activated").removeClass("wcpt-hide"),$buttons.filter('[data-wcpt-purpose="activate"]').prop("disabled",!0);break;case"active_elsewhere":$feedback.find(".wcpt-response-active-elsewhere").removeClass("wcpt-hide");break;case"invalid_key":$feedback.find(".wcpt-response-invalid-key").removeClass("wcpt-hide");break;default:$feedback.find(".wcpt-response-invalid-response").removeClass("wcpt-hide")}"activated"==data?$status.val("active"):$status.val("inactive"),$status.trigger("change")}}):alert("Please enter the valid 32 character license key received in your purchase email.")})),window.location.hash&&"pro_license"==window.location.hash.substr(1)&&$('[wcpt-model-key="pro_license"]').addClass("wcpt-open");var $shortcode_ops=$(".wcpt-shortcode-info"),$pro_op_row=$("tr",$shortcode_ops).filter((function(){var $this;return $(this).find(".wcpt-pro-badge").length})),$pro_msg_row=$('<tr><td colspan="2">Following are all <span class="wcpt-pro-badge">PRO</span> version options:</td></tr>');$pro_op_row.length&&($("td",$pro_msg_row).css({"font-size":"22px","font-weight":"bold","text-transform":"capitalize",padding:"40px 10px"}),$.merge($pro_msg_row,$pro_op_row).appendTo("tbody",$shortcode_ops)),$(document).on("wcptReactQueryAppUpdate",(function(e){wcpt.data.query_v2=e.detail})),$(document).on("wcptReactNavigationAppUpdate",(function(e){wcpt.data.navigation_settings=e.detail})),$(window).trigger("wcpt_controller_ready")})),jQuery((function($){$('.wcpt-editor-customize-theme-button[data-wcpt-purpose="customize-theme"]').on("click",(function(){var $this,$select,url=$(this).closest(".wcpt-editor-customize-theme").find("select").val();if(url){var customizerUrl=window.location.origin+"/wp-admin/customize.php";customizerUrl+="?url="+encodeURIComponent(url+"?customize_theme=1"),customizerUrl+="&autofocus[panel]=wcpt_panel",window.location.href=customizerUrl}else alert("Please select a product table to preview the theme.")})),$("body").on("change",".wcpt-editor-customize-theme select",(function(){var $select=$(this),$customize_button=$select.closest(".wcpt-editor-customize-theme").find('.wcpt-editor-customize-theme-button[data-wcpt-purpose="customize-theme"]');$select.val()?$customize_button.removeClass("wcpt-disabled"):$customize_button.addClass("wcpt-disabled")})),$('.wcpt-editor-customize-theme-button[data-wcpt-purpose="reset-theme"]').on("click",(function(e){e.preventDefault();var $this=$(this),$icon=$this.find(".wcpt-resetting-icon");confirm("Are you sure you want to clear all theme settings? This action cannot be undone.")&&($icon.removeClass("wcpt-hide"),$this.find(".wcpt-original-icon").addClass("wcpt-hide"),$this.addClass("wcpt-resetting").prop("disabled",!0),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"wcpt_reset_theme_settings",nonce:jQuery(this).data("wcpt-nonce")},success:function(response){$icon.addClass("wcpt-hide"),$this.find(".wcpt-original-icon").removeClass("wcpt-hide"),$this.removeClass("wcpt-resetting").prop("disabled",!1),response.success||alert("Error clearing theme settings: "+(response.data||"Unknown error"))},error:function(xhr,status,error){$icon.addClass("wcpt-hide"),$this.find(".wcpt-original-icon").removeClass("wcpt-hide"),$this.removeClass("wcpt-resetting").prop("disabled",!1),console.error("Theme reset error:",{xhr:xhr,status:status,error:error}),alert("Error clearing theme settings. Please try again. If the problem persists, check the browser console for details.")}}))})),$(document).on("wcptReactMoreColumnOptionsAppUpdate",(function(e){wcpt.data.more_column_options=e.originalEvent.detail}))}));